var ecam={};ecam.floatLabel=function(input)
{var label=input.parent().prev("label");label.addClass('float-over-input');};ecam.toggleLabel=function(input)
{var label=input.parent().prev("label");if(input.val()>0)
label.hide();else
label.show();};ecam.onClickSubmit=function(buttonElement,phpClass,phpMethod)
{if(buttonElement==null)
{alert('onClickSubmit(): clickable element not declared');return false;}
var button=jQuery(buttonElement);var formRoot=button.parents('form, .ecform');if(formRoot.length==0)
{alert('onClickSubmit(): no form wrapper');return false;}
var status=ecam.findClosestRelative(button,'.ecstatus');if(status.length==0)
{alert('onClickSubmit(): status element not declared');return false;}
formRoot.find('.ecError').remove();var fields=formRoot.find(".validateZipcode, .validateUKPostcode, .validateEmail, :visible.mandatory");patternMandatory=new RegExp(/([^\s]{1,})/);patternZipcode=new RegExp(/^(\d{5}-\d{4}|\d{5}|\d{9})$|^([a-zA-Z]\d[a-zA-Z] \d[a-zA-Z]\d)$/);patternUKPostcode=new RegExp(/^[A-Z]{1,2}[0-9R][0-9A-Z]? [0-9][ABD-HJLNP-UW-Z]{2}$/);patternEmail=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);for(i=0;i<fields.length;i++)
{field=fields.eq(i);var pass=ecam.validateField(field.filter(":visible.mandatory"),status,"Required field",patternMandatory);if(!pass)return false;if(field.val().length==0)
continue;var pass=ecam.validateField(field.filter(".validateZipcode"),status,"Invalid zipcode",patternZipcode);if(!pass)return false;var pass=ecam.validateField(field.filter(".validateUKPostcode"),status,"Invalid postcode",patternUKPostcode);if(!pass)return false;var pass=ecam.validateField(field.filter(".validateEmail"),status,"Invalid email address",patternEmail);if(!pass)return false;}
var controlData=new Array();var recipient=formRoot.find('#recipients-email');controlData.push({name:'action',value:'ecampaign'},{name:'formID',value:formRoot.attr('id')},{name:'class',value:phpClass},{name:'method',value:phpMethod},{name:'recipientsEmail',value:ecam.removeAntiSpam(recipient)});var primaryFormFields=formRoot.find("input, textarea").serializeArray();var secondaryFormFields=formRoot.siblings().find("input, textarea").serializeArray();var postData=ecam.mergeArraysSkippingDuplicateKeys(new Array(controlData,primaryFormFields,secondaryFormFields));ecam.updateStatus(status,true,"waiting...");jQuery.ajax({type:"POST",url:ecampaign.ajaxurl,dataType:"json",data:postData,error:function(httpRequest,textStatus,errorThrown)
{if(httpRequest.status!=undefined)
if(httpRequest.status!=200)
{ecam.updateStatus(status,false,httpRequest.status+" "+httpRequest.statusText);return false;}
ecam.updateStatus(status,false,httpRequest.responseText);},success:function(response,textStatus,httpRequest)
{if(response==undefined)
{ecam.updateStatus(status,false,'Error: submit aborted by server ');}
else
{if(response.success==undefined)
{ecam.updateStatus(status,false,"Error : submit failed, server thread exited returning error code "+response);}
else
{ecam.updateStatus(status,response.success,response.msg);if(response.nonce!=undefined)
formRoot.find("input[name='_ajax_nonce']").attr('value',response.nonce);if(response.callbackJS!=undefined)
{switch(response.callbackJS)
{case'updateMessageFields':ecam.updateMessageFields(response,button,formRoot);break;case'revealVerificationField':ecam.revealVerificationField(response,button,formRoot);break;case'revealForm':ecam.revealForm(response,button,formRoot);break;}}
if(response.regexp!=undefined)
ecam.updateMessageBody(response.regexp,button,formRoot);}}}});return false;};ecam.removeAntiSpam=function(selection)
{var string="";if(selection.length>0)
string=ecam.getNodeText(selection[0],string);return string;};ecam.getNodeText=function(parent,string)
{var i;for(i in parent.childNodes)
{var node=parent.childNodes[i];if(node.nodeType==3)
string+=node.data;else{if(node.childNodes!=undefined)
string=ecam.getNodeText(node,string);}}
return string;};ecam.validateField=function(field,status,errorText,pattern)
{if(field.length>0&&!pattern.test(field.val().toUpperCase()))
{field.focus();jQuery('<div></div>').addClass('ecFieldError ecError').html(errorText).appendTo(field.parent());return false;}
return true;};ecam.updateStatus=function(status,success,msg)
{if(status.length==0)
{alert(msg);return success;}
if(success)
jQuery('<div></div>').addClass('ecOk').html(msg).appendTo(status.empty());else
jQuery('<div></div>').addClass('ecError').html(msg).appendTo(status.empty());};ecam.updateMessageBody=function(regexp,button,formRoot)
{var body=formRoot.find("textarea[name='body']").first();var currentText=body.val();var updatedText=currentText.replace(regexp.pattern,regexp.replacement);if(updatedText!=currentText)
{ecam.lastOriginalText=currentText;ecam.lastUpdatedText=updatedText;}
else
{if(ecam.lastUpdatedText!=undefined&&currentText==ecam.lastUpdatedText)
{updatedText=ecam.lastOriginalText.replace(regexp.pattern,regexp.replacement);if(updatedText!=ecam.lastOriginalText)
{ecam.lastUpdatedText=updatedText;}
else
{alert("Unable to substitute "+regexp.pattern+" with "+regexp.replacement);return;}}
else
{alert("Message text may have been edited; "+" unable to substitute "+regexp.pattern+" with "+regexp.replacement+". Please check the message text before sending.");return;}}
var updatedMessageBody=updatedText;if(jQuery.browser.msie)
{var parent=body.parent();var openingTagPattern=new RegExp("<textarea[^>]*>","i");var openingTagMatch=openingTagPattern.exec(parent.html());var textArea=openingTagMatch[0]+updatedMessageBody+'</textarea>';body.before(textArea);body.remove();}
else
body.val(updatedMessageBody);}
ecam.updateMessageFields=function(response,button,formRoot)
{var names="",emails="",num=0;if(response.target!=undefined)
{for(var i in response.target)
{if(num++!=0){names=names+",<br/>";emails=emails+",";}
names=names+response.target[i].name+"&nbsp;&lt;"+response.target[i].email+"&gt;";emails=emails+response.target[i].email;}
formRoot.find("#recipients-email").html(names);}
if(response.targetSubject!=undefined)
formRoot.find("input[name='subject']").attr('value',response.targetSubject);if(response.targetBody!=undefined)
formRoot.find("textarea[name='body']").html(response.targetBody);submitButton=formRoot.find(".ecsend input");submitButton.removeAttr("disabled");};ecam.findClosestRelative=function(elements,select)
{var parents=elements.parents();for(var i=0;i<parents.length;i++)
{var cousins=jQuery(parents[i]).find(select);if(cousins.length>0)
return cousins.first();}
return jQuery();};ecam.revealVerificationField=function(response,button,formRoot)
{if(response.success)
{formRoot.find('.eccode').show('slow');}};ecam.revealForm=function(response,button,formRoot)
{var nextForm;if(response.success)
{button.attr("disabled","disabled");if(response.selector==undefined)
nextForm=formRoot.siblings();else
nextForm=jQuery(response.selector);nextForm.show('slow');}};ecam.mergeArraysSkippingDuplicateKeys=function(s)
{var keys=new Array();var output=new Array();for(i in s)
{for(j in s[i])
{obj=s[i][j];if(keys[obj.name]==undefined)
{keys[obj.name]=obj.value;output.push(obj);}}}
return output;};ecam.friendsCallBack=function(response,button)
{};ecam.addFriend=function()
{var subsequentFriend=jQuery('#ec-friends-list div.ecfriend:first').find('.ecError').remove().end().clone(true).addClass('subsequent').insertBefore(jQuery('#ec-add-friend'));jQuery('#ec-friends-list .ecfriend').each(function(i,friendElement){var ecfriend=jQuery(friendElement).find('label').removeAttr('id').attr('for','ef-'+i).end().find('input').attr('id','ef-'+i).attr('name','emailfriend'+(i+1));});var input=subsequentFriend.find('input');input.after("<a href='#' class='smaller float' onclick='return ecam.removeFriend(this);'>remove</a>");return false;};ecam.removeFriend=function(friendElement)
{jQuery(friendElement).closest('.ecfriend').remove();return false;};ecam.removeLabel=function(inputElement)
{var input=jQuery(inputElement)
var val=input.attr('value');if(val.length>0)
input.next('label').hide();else
input.next('label').show();return false;};jQuery(document).ready(function(){jQuery(".ecinputwrap input[type='text']").each(function(index,element)
{});jQuery(".ecinputwrap input[type='text']").keyup(function(){return true;});jQuery(".ecinputwrap input[type='text']").change(function(){var input=jQuery(this);var name=input.attr('name');var ecampaign=input.parents(".ecform, .ecampaign");var sameInputs=ecampaign.siblings().find(".ecinputwrap input[type='text']");sameInputs=sameInputs.filter("[name='"+name+"']");var dataKeyed=input.val();sameInputs.attr('value',dataKeyed);return true;});});;(function($){"use strict";$(function(){});}(jQuery));;(function(e,o,t,undefined){if(e&&o){o.FooBox={defaults:{affiliate:{enabled:!0,prefix:"Powered by ",url:"http://fooplugins.com/plugins/foobox/"},closeOnOverlayClick:!0,containerCssClass:"fbx-instance",countMessage:"item %index of %total",error:"Could not load the item",excludes:".fbx-link, .nofoobox",externalSelector:"a[data-foobox],input[data-foobox]",fitToScreen:!1,hideScrollbars:!0,loadDelay:0,loaderTimeout:650,modalClass:"",preload:!1,rel:"foobox",resizeSpeed:300,selector:"a",showButtons:!0,showCount:!0,strings:{close:"Close",next:"Next",prev:"Previous"},style:"fbx-rounded",theme:"fbx-light",transitionInSpeed:200,transitionOutSpeed:200},version:"2.0.0",instances:[],ready:function(e){/in/.test(document.readyState)?setTimeout("FooBox.ready("+e+")",9):e()}},FooBox.format=function(){var e,o,t=arguments[0];for(e=0;arguments.length-1>e;e++)o=RegExp("\\{"+e+"\\}","gm"),t=t.replace(o,arguments[e+1]);return t},FooBox.browser={isIE:!1,version:0,css:null,check:function(){-1!==navigator.appVersion.indexOf("MSIE")&&(FooBox.browser.isIE=!0,FooBox.browser.version=parseFloat(navigator.appVersion.split("MSIE")[1]),FooBox.browser.css=FooBox.format("fbx-ie fbx-ie{0}",FooBox.browser.version))}},FooBox.browser.check(),t||(t={}),t.log=t.log||function(){},t.warn=t.warn||function(){},t.error=t.error||function(){},t.info=t.info||function(){};var i={write:function(){t.log(FooBox.format.apply(i,arguments))},error:function(){1===arguments.length&&arguments[0]instanceof Error?t.error(arguments[0]):t.error(FooBox.format.apply(i,arguments))}};jQuery.Event.prototype.fb={instance:null,modal:null,options:null,handled:!1},FooBox.raise=function(o,t,i){i=i||{};var n=e.Event(t);return n.fb={},n.fb.instance=o,n.fb.modal=o.modal.element,n.fb.options=o.options,n.fb.handled=!1,e.extend(!0,n.fb,i),o.element.trigger(n),n},FooBox.options={isMultipart:function(e,o){return"string"==typeof e&&e.length>0&&-1!==e.indexOf(o)},hasProperties:function(e){if("object"!=typeof e)return!1;var o;for(o in e)if(e.hasOwnProperty(o))return!0;return!1},get:function(e,o){if(FooBox.options.isMultipart(o,".")){var t=o.substring(0,o.indexOf(".")),i=o.substring(o.indexOf(".")+1);return e[t]=e[t]||{},FooBox.options.get(e[t],i)}return e[o]},set:function(e,o,t){if(FooBox.options.isMultipart(o,".")){var i=o.substring(0,o.indexOf(".")),n=o.substring(o.indexOf(".")+1);e[i]=e[i]||{},FooBox.options.set(e[i],n,t)}else e[o]=t},merge:function(e,o,t){var i,n=Array.prototype.slice.call(arguments);for(e=n.shift(),o=n.shift(),FooBox.options._merge(e,o),i=0;n.length>i;i++)t=n[i],FooBox.options._merge(e,t);return e},_merge:function(o,t){var i;for(i in t)t.hasOwnProperty(i)&&(FooBox.options.hasProperties(t[i])&&!e.isArray(t[i])?(o[i]=o[i]||{},FooBox.options._merge(o[i],t[i])):e.isArray(t[i])?(o[i]=[],e.extend(!0,o[i],t[i])):o[i]=t[i])}},FooBox.addons={registered:[],validate:function(o){return e.isFunction(o)?!0:(i.error('Expected type "function", received type "{0}".',typeof o),!1)},register:function(o,t){return FooBox.addons.validate(o)?(FooBox.addons.registered.push(o),"object"==typeof t&&e.extend(!0,FooBox.defaults,t),!0):(i.error("Failed to register the addon."),!1)},load:function(e){var o,t,n=[];for(t=0;FooBox.addons.registered.length>t;t++)try{o=FooBox.addons.registered[t],n.push(new o(e))}catch(s){i.error(s)}return n},call:function(o,t){var n,s=Array.prototype.slice.call(arguments);o=s.shift(),t=s.shift();for(var a=0;o.addons.length>a;a++)try{if(n=o.addons[a],!e.isFunction(n[t]))continue;n[t].apply(n,s)}catch(r){i.error(r)}}},FooBox.handlers={registered:[],validate:function(o){if(!e.isFunction(o))return i.error('Expected type "function", received type "{0}".',typeof o),!1;var t=new o;return e.isFunction(t.handles)?e.isFunction(t.defaults)?e.isFunction(t.parse)?e.isFunction(t.load)?e.isFunction(t.getSize)?e.isFunction(t.hasChanged)?e.isFunction(t.preload)?!0:(i.error('The required "preload" method is not implemented.'),!1):(i.error('The required "hasChanged" method is not implemented.'),!1):(i.error('The required "getSize" method is not implemented.'),!1):(i.error('The required "load" method is not implemented.'),!1):(i.error('The required "parse" method is not implemented.'),!1):(i.error('The required "defaults" method is not implemented.'),!1):(i.error('The required "handles" method is not implemented.'),!1)},register:function(o,t){return FooBox.handlers.validate(o)?(FooBox.handlers.registered.push(o),"object"==typeof t&&e.extend(!0,FooBox.defaults,t),!0):(i.error("Failed to register the handler."),!1)},load:function(e){for(var o,t=[],n=0;FooBox.handlers.registered.length>n;n++)try{o=FooBox.handlers.registered[n],t.push(new o(e))}catch(s){i.error(s)}return t},call:function(o,t){var n,s=Array.prototype.slice.call(arguments);o=s.shift(),t=s.shift();for(var a=0;o.handlers.length>a;a++)try{if(n=o.handlers[a],!e.isFunction(n[t]))continue;n[t].apply(n,s)}catch(r){i.error(r)}},get:function(e,o){var t;for(t=0;e.handlers.length>t;t++)if(e.handlers[t].type==o)return e.handlers[t];return null}},FooBox.Item=function(o,t,i){this.type=o,this.element=t instanceof jQuery?t:e(t),this.handler=i,this.width=null,this.height=null,this.url=null,this.title=null,this.description=null,this.content=null,this.placeholder=null,this.selector=null,this.image=null,this.deeplink=null,this.video_id=null,this.video_type=null,this.video_url=null,this.video_valid=null,this.preloaded=!1,this.error=!1,this.fullscreen=!1,this.overflow=!1,this.captions=!1,this.social=!1},FooBox.Size=function(e,o){this.width="number"==typeof e?e:parseInt(e,0),this.height="number"==typeof o?o:parseInt(o,0)},FooBox.Timer=function(){this.id=null,this.busy=!1;var e=this;this.start=function(o,t,i){i=i||o,e.stop(),e.id=setTimeout(function(){o.call(i),e.id=null,e.busy=!1},t),e.busy=!0},this.stop=function(){null!==e.id&&e.busy!==!1&&(clearTimeout(e.id),e.id=null,e.busy=!1)}},e.fn.foobox=function(){var o,t,i=Array.prototype.slice.call(arguments),n=i.shift();if(n===undefined||"object"==typeof n)return this.each(function(){var o=e(this).data("foobox_instance");o instanceof FooBox.Instance?o.reinit(n):(o=new FooBox.Instance,o.init(this,n),e(this).data("foobox_instance",o))});if("string"==typeof n&&"option"!==n.toLowerCase())return"init"===n?this:this.each(function(){var o=e(this).data("foobox_instance");return o instanceof FooBox.Instance?(e.isFunction(o[n])&&o[n].apply(o,i),!0):!0});if("string"==typeof n&&"option"===n.toLowerCase()){var s,a,r,l=[];return o=i.shift(),t=i.shift(),r="string"==typeof o&&t===undefined,s="string"==typeof o&&t!==undefined,a="object"==typeof o&&t===undefined,this.each(function(){var i=e(this).data("foobox_instance");return i instanceof FooBox.Instance?(i.options?(r&&l.push(FooBox.options.get(i.options,o)),s&&FooBox.options.set(i.options,o,t),a&&FooBox.options.merge(i.options,o),(s||a)&&i.reinit(i.options)):r&&l.push(undefined),!0):!0}),r?1>=l.length?l.shift():l:this}return this},FooBox.Modal=function(o){this.FooBox=o,this.element=null,this.loaderTimeout=new FooBox.Timer,this._first=!1;var t=this;this.init=function(e,o){t.setup.html(),t.setup.options(o),t.setup.bind()},this.reinit=function(e){t.setup.options(e)},this.setup={html:function(){if(!(t.element instanceof jQuery)){t.element=e('<div class="fbx-modal"></div>'),t.element.append('<div class="fbx-inner-spacer"></div>');var o=e('<div class="fbx-stage"></div>');o.append('<div class="fbx-item-current"></div>'),o.append('<div class="fbx-item-next"></div>');var i=e('<div class="fbx-inner"></div>');i.append(o),i.append('<a href="#prev" class="fbx-prev fbx-btn-transition"></a>'),i.append('<div class="fbx-credit"><a target="_blank" href=""><em></em><span> FooBox</span></a></div>'),i.append('<span class="fbx-count" />'),i.append('<a href="#next" class="fbx-next fbx-btn-transition"></a>'),i.append('<a href="#close" class="fbx-close fbx-btn-transition"></a>'),t.element.append('<div class="fbx-loader"><div></div></div>'),t.element.append(i),t.FooBox.raise("foobox.setupHtml"),e("body").append(t.element)}},options:function(e){var o;t.element.removeClass().addClass("fbx-modal").addClass(t.FooBox.element.data("style")||e.style).addClass(t.FooBox.element.data("theme")||e.theme).addClass(e.modalClass),FooBox.browser.isIE&&9>FooBox.browser.version&&t.element.addClass(FooBox.browser.css),o=e.affiliate.enabled?"":"none",t.element.find(".fbx-credit").css("display",o),e.affiliate.enabled&&(t.element.find(".fbx-credit > a").attr("href",e.affiliate.url),t.element.find(".fbx-credit > a > em").text(e.affiliate.prefix)),o=e.showCount&&t.FooBox.items.multiple()?"":"none",t.element.find(".fbx-count").css("display",o),o=e.showButtons&&t.FooBox.items.multiple()?"":"none",t.element.find(".fbx-prev, .fbx-next").css("display",o),t.element.find(".fbx-close").attr("title",e.strings.close),t.element.find(".fbx-prev").attr("title",e.strings.prev),t.element.find(".fbx-next").attr("title",e.strings.next),t.FooBox.raise("foobox.setupOptions")},bind:function(){t.element.unbind("click.foobox").bind("click.foobox",function(o){e(o.target).is(".fbx-modal")&&1==t.FooBox.options.closeOnOverlayClick&&t.close()}).find(".fbx-close").unbind("click.foobox").bind("click.foobox",function(e){return e.preventDefault(),t.close(),!1}).end().find(".fbx-prev").unbind("click.foobox").bind("click.foobox",function(e){return e.preventDefault(),t.prev(),!1}).end().find(".fbx-next").unbind("click.foobox").bind("click.foobox",function(e){return e.preventDefault(),t.next(),!1})}},this.prioritize=function(){FooBox.instances.length>1&&t.element.nextAll(".fbx-modal:last").after(t.element)},this.preload=function(){if(1==t.FooBox.options.preload){var e=t.FooBox.items.prev();e.handler.preload(e);var o=t.FooBox.items.next();o.handler.preload(o)}},this.show=function(o){function n(e){t.loaderTimeout.stop(),t.element.find(".fbx-loader").hide(),i.error(e);var n=t.FooBox.raise("foobox.onError",{error:e});if(1!=n.fb.handled){var a=t.FooBox.items.error(s.index);null!=a&&t.show(o)}}o=o||!1,t._first=o,e("body").addClass("fbx-active"),t.FooBox.options.hideScrollbars&&e("html, body").css("overflow","hidden");var s=t.FooBox.items.current();1==s.error?t.element.addClass("fbx-error"):t.element.removeClass("fbx-error"),t.element.is(":visible")||(t.prioritize(),t.FooBox.raise("foobox.beforeShow",{item:s}),t.element.find(".fbx-inner").hide().css({width:"100px",height:"100px","margin-top":"-50px","margin-left":"-50px"}).end().show(),t.FooBox.raise("foobox.afterShow",{item:s}));var a=t.element.find(".fbx-item-current"),r=t.element.find(".fbx-item-next");r.hide().css("opacity","0"),t.element.find(".fbx-count").text(t.FooBox.options.countMessage.replace("%index",""+(t.FooBox.items.indexes.current+1)).replace("%total",""+t.FooBox.items.array.length));var l=t.FooBox.raise("foobox.beforeLoad",{item:s});if(1!=l.fb.handled){if(s.handler.hasChanged(s)){var d=s.index;s=s.handler.parse(s.element),t.FooBox.items.array[d]=s}t.preload(),t.loaderTimeout.start(function(){t.element.addClass("fbx-loading").find(".fbx-loader").show()},t.FooBox.options.loaderTimeout),setTimeout(function(){s.handler.load(s,r,function(e){t.transitionOut(a,function(){t.resize(e,function(e){1==s.overflow&&(e.width<.8*s.width||e.height<.8*s.height)?r.find(".fbx-item").css({width:s.width,height:s.height}):r.find(".fbx-item").css({width:"",height:""}),t.loaderTimeout.stop(),t.element.removeClass("fbx-loading").find(".fbx-loader").hide(),t.element.find(".fbx-inner").show(),r.show(),t.transitionIn(r,function(){r.add(a).toggleClass("fbx-item-next fbx-item-current"),1==s.overflow?r.add(a).css("overflow",""):r.add(a).css("overflow","hidden"),a.empty(),t.FooBox.raise("foobox.afterLoad",{item:s})},n)},n)},n)},n)},t.FooBox.options.loadDelay)}},this.resize=function(o,i,n){function s(o,n){t.FooBox.raise("foobox.afterResize",{modal:t.element,item:a}),e.isFunction(i)&&i(new FooBox.Size(o,n))}try{if(!t.element.is(":visible"))return;if(0===o.width||0===o.height)return e.isFunction(n)&&n(FooBox.format("Invalid size supplied. Width = {0}, Height = {1}",o.width,o.height)),undefined;var a=t.FooBox.items.current();t.FooBox.raise("foobox.beforeResize",{modal:t.element,item:a});var r=t.element.find(".fbx-inner"),l=t.element.find(".fbx-inner-spacer"),d=t.FooBox.options.showButtons&&t.FooBox.items.multiple(),f=parseInt(l.css("padding-top"),0),c=parseInt(l.css("padding-bottom"),0),u=parseInt(l.css("padding-left"),0),h=parseInt(l.css("padding-right"),0),p=parseInt(r.css("border-top-width"),0),m=parseInt(r.css("border-bottom-width"),0),b=parseInt(r.css("border-left-width"),0),x=parseInt(r.css("border-right-width"),0),g=parseInt(r.css("padding-left"),0),v=parseInt(r.css("height"),0),F=parseInt(r.css("width"),0),w=(d?f+c:2*f)+2*g+p+m,y=u+h+2*g+b+x,B=t.element.height()-w,C=t.element.width()-y,k=C/o.width;o.height*k>B&&(k=B/o.height);var z=o.height,S=o.width;if((t.FooBox.options.fitToScreen===!0||o.height>B||o.width>C)&&(z=Math.floor(o.height*k),S=Math.floor(o.width*k)),100>z&&(z=100),100>S&&(S=100),z!==v||S!==F){var _=-(z/2+g+(p+m)/2+(d?c-f:0)),I=-(S/2+g+(b+x)/2);r.animate({height:z,width:S,"margin-top":_,"margin-left":I},t.FooBox.options.resizeSpeed,function(){s(S,z)})}else s(F,v)}catch(O){e.isFunction(n)&&n(O)}},this.transitionOut=function(o,i,n){try{o.animate({opacity:0},o.is(":visible")?t.FooBox.options.transitionOutSpeed:0,function(){e.isFunction(i)&&i()})}catch(s){e.isFunction(n)&&n(s)}},this.transitionIn=function(o,i,n){try{o.animate({opacity:1},t.FooBox.options.transitionInSpeed,function(){e.isFunction(i)&&i()})}catch(s){e.isFunction(n)&&n(s)}},this.close=function(){t.element.hide(),t.FooBox.options.hideScrollbars&&e("html, body").css("overflow",""),e("body").removeClass("fbx-active"),t.FooBox.raise("foobox.close"),t.element.find(".fbx-item-current, .fbx-item-next").empty()},this.prev=function(e){if(t.FooBox.items.indexes.set(t.FooBox.items.indexes.prev),"string"==typeof e)for(var o=t.FooBox.items.current();o.type!=e;)t.FooBox.items.indexes.set(t.FooBox.items.indexes.prev),o=t.FooBox.items.current();t.show(!1),t.FooBox.raise("foobox.previous")},this.next=function(e){if(t.FooBox.items.indexes.set(t.FooBox.items.indexes.next),"string"==typeof e)for(var o=t.FooBox.items.current();o.type!=e;)t.FooBox.items.indexes.set(t.FooBox.items.indexes.next),o=t.FooBox.items.current();t.show(!1),t.FooBox.raise("foobox.next")}},FooBox.Instance=function(){this.id=FooBox.instances.push(this),this.element=null,this.options=e.extend(!0,{},FooBox.defaults),this.addons=FooBox.addons.load(this),this.handlers=FooBox.handlers.load(this),this.modal=new FooBox.Modal(this);var o=this;this.raise=function(e,t){return FooBox.raise(o,e,t)},this.init=function(t,i){o.element=t instanceof jQuery?t:e(t),o.options=FooBox.options.merge(o.options,i||{}),FooBox.addons.call(o,"preinit",o.element,o.options),o.setup.bind(),o.items.init(),o.modal.init(t,o.options),FooBox.handlers.call(o,"init",o.element,o.options),o.options.containerCssClass&&o.element.addClass(o.options.containerCssClass),o.raise("foobox.initialized")},this.reinit=function(e){o.options=FooBox.options.merge(o.options,e||{}),o.setup.bind(),o.items.init(),o.modal.reinit(o.options),FooBox.handlers.call(o,"reinit",o.options),o.raise("foobox.reinitialized")},this.setup={bind:function(){var t=e(o.element).data("foobox_instance");t instanceof FooBox.Instance||e(o.element).data("foobox_instance",o),e(o.options.externalSelector).unbind("click.foobox").bind("click.foobox",function(o){o.preventDefault();var i=e(this).data("foobox"),n=e(i);return t=n.data("foobox_instance"),n.length>0&&t instanceof FooBox.Instance&&t.modal instanceof FooBox.Modal&&t.modal.show(!0),!1})}},this.items={array:[],indexes:{prev:-1,current:0,next:1,direction:"*",set:function(e){var t=o.items.indexes.current;e=e||0,e=e>o.items.array.length-1?0:0>e?o.items.array.length-1:e;var i=e-1,n=e+1;o.items.indexes.current=e,o.items.indexes.prev=0>i?o.items.array.length-1:i,o.items.indexes.next=n>o.items.array.length-1?0:n,o.items.indexes.direction=o.items.indexes._direction(t,e,o.items.array.length-1)},_direction:function(e,o,t){return 0==o&&e==t?">":o==t&&0==e?"<":o>e?">":e>o?"<":"*"}},new_array:function(){var t,i,n=[],s=0;if(e.isArray(o.options.items))for(var a=0;o.options.items.length>a;a++){t=o.options.items[a];for(var r=0;o.handlers.length>r;r++)if(o.handlers[r].type==t.type){t.index=s,t.handler=o.handlers[r],t.handler.defaults(t),i=o.raise("foobox.parseItem",{element:null,item:t}),n.push(i.fb.item),s++;break}}return n},init:function(){o.items.array=o.items.new_array(),o.items.array.length>0||o.element.is(o.options.selector)&&o.items.add(o.element)?o.element.unbind("click.foobox").bind("click.foobox",o.items.clicked):o.element.find(o.options.selector).not(o.options.excludes).unbind("click.foobox").filter(function(){return o.items.add(this)}).bind("click.foobox",o.items.clicked),o.items.rel(o.element)},rel:function(t){t=t instanceof jQuery?t:e(t);var i=t.attr("rel"),n="string"==typeof o.options.rel?o.options.rel.length:0;i&&i.length>=n&&i.substr(0,n)==o.options.rel&&e('[rel="'+i+'"]').not(o.options.excludes).not(t).unbind("click.foobox").filter(function(){return o.items.add(this)}).bind("click.foobox",o.items.clicked)},indexOf:function(e,t){if(!e)return-1;t=t||"url";var i;for(i=0;o.items.array.length>i;i++)if(o.items.array[i][t]==e[t])return i;return-1},add:function(t){t=t instanceof jQuery?t:e(t);var i=o.items.parse(t);if(null===i)return!1;var n=t.get(0),s=o.items.indexOf(i);-1!=s?(i=o.items.array[s],n.index=i.index):n.index=i.index=o.items.array.push(i)-1;var a=t.data("foobox_instance");return a instanceof jQuery||t.data("foobox_instance",o),!0},get:function(t){t=t instanceof jQuery?t:e(t);var i=null,n=t.get(0).index;return n&&n>0&&o.items.array.length-1>=n&&(i=o.items.array[n]),i},parse:function(t){t=t instanceof jQuery?t:e(t);for(var i,n,s=0;o.handlers.length>s;s++)if(o.handlers[s].handles(t,o.element)){i=o.handlers[s].parse(t),n=o.raise("foobox.parseItem",{element:t,item:i});break}return n!==undefined&&n.fb.item?n.fb.item:null},error:function(t){if(o.items.array.length>t&&1==o.items.array[t].error)return o.items.array[t];var i,n,s=FooBox.handlers.get(o,"html"),a=!1;if(null==s)return null;if(null!==o.options.error.match(/^#/i)&&e(o.options.error).length>0)i=e(o.options.error),a=!0;else{var r=FooBox.format('<div class="fbx-error-msg" data-width="240" data-height="240"><span></span><p>{0}</p></div>',o.options.error);i=e(r)}return n=new FooBox.Item(s.type,i.get(0),s),n.selector=1==a?o.options.error:null,n.index=t,n.error=!0,n.title=i.data("title")||null,n.description=i.data("description")||null,n.width=i.data("width")||null,n.height=i.data("height")||null,n.content=1==a?null:i,n.fullscreen=!0,o.items.array[t]=n,n},current:function(){return o.items.array[o.items.indexes.current]},prev:function(){return o.items.array[o.items.indexes.prev]},next:function(){return o.items.array[o.items.indexes.next]},multiple:function(){return o.items.array.length>1},clicked:function(e){return e.preventDefault(),o.items.indexes.set(this.index),o.modal.show(!0),!1}}},FooBox.open=function(o){var t=document.createElement("a");e(t).foobox(o);var i=e(t).data("foobox_instance");return i.modal.show(!0),i}}})(jQuery,window,window.console),function(e,o){var t={captions:{animation:"slide",enabled:!0,descSource:"find",hoverDelay:300,maxHeight:.4,onlyShowOnHover:!1,overrideDesc:!1,overrideTitle:!1,prettify:!1,titleSource:"image_find"},strings:{caption_close:"Close Caption"}};o.Captions=function(t){this.FooBox=t,this.timers={hover:new o.Timer};var i=this;this.preinit=function(e){e.unbind({"foobox.initialized foobox.reinitialized":i.handlers.initialized,"foobox.setupHtml":i.handlers.setupHtml,"foobox.setupOptions":i.handlers.setupOptions,"foobox.parseItem":i.handlers.parseItem,"foobox.onError":i.handlers.onError}).bind({"foobox.initialized foobox.reinitialized":i.handlers.initialized,"foobox.setupHtml":i.handlers.setupHtml,"foobox.setupOptions":i.handlers.setupOptions,"foobox.parseItem":i.handlers.parseItem,"foobox.onError":i.handlers.onError})},this.handlers={initialized:function(e){e.fb.instance.element.unbind({"foobox.beforeLoad":i.handlers.beforeLoad,"foobox.afterLoad":i.handlers.afterLoad,"foobox.afterResize":i.handlers.afterResize}),e.fb.modal.undelegate("mouseenter.captions mouseleave.captions").find(".fbx-item-current, .fbx-item-next").unbind("click.captions"),e.fb.options.captions.enabled===!0&&(e.fb.instance.element.bind({"foobox.beforeLoad":i.handlers.beforeLoad,"foobox.afterLoad":i.handlers.afterLoad,"foobox.afterResize":i.handlers.afterResize}),e.fb.modal.find(".fbx-item-current, .fbx-item-next").bind("click.captions",i.handlers.toggleCaptions),e.fb.options.captions.onlyShowOnHover===!0&&(e.fb.instance.element.unbind({"foobox.beforeLoad":i.handlers.beforeLoad,"foobox.afterLoad":i.handlers.afterLoad}),e.fb.modal.delegate(".fbx-inner:not(:has(.fbx-item-error))","mouseenter.captions",i.handlers.mouseenter).delegate(".fbx-inner:not(:has(.fbx-item-error))","mouseleave.captions",i.handlers.mouseleave)))},toggleCaptions:function(){0==e(this).has(".fbx-item-error").length&&(i.FooBox.modal.element.find(".fbx-caption").is(":visible")?(i.FooBox.modal.element.addClass("fbx-captions-hidden"),i.hide()):(i.FooBox.modal.element.removeClass("fbx-captions-hidden"),i.show()))},mouseenter:function(e){return e.preventDefault(),i.timers.hover.start(function(){i.show()},i.FooBox.options.captions.hoverDelay),!1},mouseleave:function(e){return e.preventDefault(),i.timers.hover.start(function(){i.hide()},i.FooBox.options.captions.hoverDelay),!1},setupHtml:function(e){e.fb.modal.find(".fbx-stage").append('<div class="fbx-caption"></div>')},setupOptions:function(e){var o=e.fb.options.captions.enabled?"":"none";e.fb.modal.find(".fbx-caption").css("display",o).bind("click.captions",function(){return e.preventDefault(),!1})},beforeLoad:function(){i.hide()},afterLoad:function(){i.show()},afterResize:function(){i.checkHeight()},onError:function(){i.hide()},parseItem:function(t){var n=t.fb.options.captions;if(t.fb.item.captions&&0!=n.enabled){var s,a,r="";if(null!=t.fb.element){var l=e(t.fb.element).data("titleSource")||e(t.fb.instance.element).data("titleSource")||n.titleSource,d=e(t.fb.element).data("descSource")||e(t.fb.instance.element).data("descSource")||n.descSource;s=t.fb.element.data("title")||i.text(t.fb.element,l),a=t.fb.element.data("description")||i.text(t.fb.element,d)}else s=t.fb.item.title,a=t.fb.item.description;s&&s==a&&(a=null),r="string"==typeof s&&s.length>0?o.format('<div class="fbx-caption-title">{0}</div>',s):r,r="string"==typeof a&&a.length>0?r+o.format('<div class="fbx-caption-desc">{0}</div>',a):r,t.fb.item.title=s,t.fb.item.description=a,t.fb.item.caption=r,t.fb.instance.raise("foobox.createCaption",{element:t.fb.element,item:t.fb.item})}}},this.text=function(o,t){var n;switch(t){case"find":n=e.trim(o.attr("title"))||e.trim(o.find("img:first").attr("title"))||e.trim(o.find("img:first").attr("alt"));break;case"image_find":n=e.trim(o.find("img:first").attr("title")||o.find("img:first").attr("alt"));break;case"image":n=e.trim(o.find("img:first").attr("title"));break;case"image_alt":n=e.trim(o.find("img:first").attr("alt"));break;case"anchor":n=e.trim(o.attr("title"));break;default:n=null}return i.FooBox.options.captions.prettify&&(n=i.prettifier(n)),n},this.hide=function(){var e=i.FooBox.items.current(),o=i.FooBox.modal.element.find(".fbx-caption");if(!i.FooBox.options.captions.enabled||!e.captions||"string"!=typeof e.caption||0==e.caption.length)return o.css("display","none"),void 0;switch(i.FooBox.options.captions.animation){case"fade":o.stop(!0,!0).fadeOut(400);break;case"slide":o.stop(!0,!0).slideUp(400);break;default:o.css("display","none")}},this.show=function(){var t=i.FooBox.items.current(),n=i.FooBox.modal.element.find(".fbx-caption");if(!i.FooBox.options.captions.enabled||!t.captions||"string"!=typeof t.caption||0==t.caption.length||i.FooBox.modal.element.hasClass("fbx-captions-hidden"))return n.css("display","none"),void 0;switch(n.html(t.caption),n.find('a[href^="#"]').filter(function(){var t=e(this).attr("href"),i=e(t),n=i.data("foobox_instance");return i.length>0&&n instanceof o.Instance?(e(this).data("hrefTarget",i.get(0)),!0):!1}).unbind("click.captions").bind("click.captions",function(t){t.preventDefault();var n=e(this).data("hrefTarget"),s=e(n).data("foobox_instance");return s instanceof o.Instance&&(i.FooBox.modal.close(),s.items.indexes.set(n.index),s.modal.show()),!1}),e('<a href="#caption_close" title="'+i.FooBox.options.strings.caption_close+'" class="fbx-caption-close">&times;</a>').bind("click.captions",function(e){return e.preventDefault(),i.FooBox.modal.element.addClass("fbx-captions-hidden"),i.hide(),!1}).prependTo(n),i.checkHeight(),i.FooBox.options.captions.animation){case"fade":n.stop(!0,!0).fadeIn(400);break;case"slide":n.stop(!0,!0).slideDown(400);break;default:n.css("display","")}},this.checkHeight=function(){var e=i.FooBox.modal.element,o=i.FooBox.items.current();if(i.FooBox.options.captions.enabled&&o.captions){var t=e.find(".fbx-caption"),n=t.find(".fbx-caption-desc");n.length>0&&t.outerHeight(!0)>e.find(".fbx-inner").height()*i.FooBox.options.captions.maxHeight?n.hide():n.show()}},this.prettifier=function(e){return"string"!=typeof e?null:(e=e.replace(/\s*-\d+/g,"").replace(/\s*_\d+/g,"").replace(/-/g," ").replace(/_/g," "),e=e.replace(/\w\S*/g,function(e){return-1!=e.indexOf("#")?e:e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))}},o.addons.register(o.Captions,t)}(jQuery,window.FooBox),function(e,o){var t={deeplinking:{enabled:!0,prefix:"foobox"}};o.DeepLinking=function(o){this.FooBox=o;var t=this;this.preinit=function(e){e.unbind("foobox.initialized foobox.reinitialized",t.handlers.initialized).bind("foobox.initialized foobox.reinitialized",t.handlers.initialized)},this.handlers={initialized:function(o){if(o.fb.instance.element.unbind({"foobox.afterLoad":t.handlers.afterLoad,"foobox.close":t.handlers.close}),o.fb.options.deeplinking.enabled===!0){o.fb.instance.element.bind({"foobox.afterLoad":t.handlers.afterLoad,"foobox.close":t.handlers.close});var i=t.hash.get();if(i&&t.FooBox.id==i.id){var n=t.FooBox.items.array[i.index];t.FooBox.raise("foobox.hasHash",{item:n}),setTimeout(function(){e(n.element).click()},50)}}},afterLoad:function(){t.hash.set()},close:function(){t.hash.clear()}},this.hash={get:function(){if(-1===location.hash.indexOf("#"+t.FooBox.options.deeplinking.prefix))return null;var o=location.hash;"/"==o.substr(-1)&&(o=o.substr(0,o.length-1));var i=o.match(/\/([^\/]+)\/?([^\/]+)?$/),n=i[1],s=i[2],a=-1;"string"==typeof s&&e.each(t.FooBox.items.array,function(e,o){return o.deeplink&&o.deeplink===s?(a=e,!1):!0}),-1==a&&(a=n);var r=o.substring(0,o.indexOf("/"));return r=r.replace("#"+t.FooBox.options.deeplinking.prefix+"-",""),{id:r,index:a}},set:function(){var e=t.FooBox.items.current(),o=t.FooBox.options.deeplinking.prefix+"-"+t.FooBox.id+"/"+e.index,i=e.deeplink;i&&(o+="/"+i),window.location.replace((""+window.location).split("#")[0]+"#"+o)},clear:function(){window.location.replace((""+window.location).split("#")[0]+"#/")}}},o.addons.register(o.DeepLinking,t)}(jQuery,window.FooBox),function(e,o){o.Events=function(t){this.FooBox=t;var i=this;this.preinit=function(e){e.unbind({"foobox.afterLoad":i.handlers.foobox_image_onload,"foobox.beforeLoad":i.handlers.foobox_image_custom_caption}).bind({"foobox.afterLoad":i.handlers.foobox_image_onload,"foobox.beforeLoad":i.handlers.foobox_image_custom_caption})},this.raise=function(o,t){t=t||{};var n=e.Event(o);return e.extend(!0,n,t),i.FooBox.element.trigger(n),n},this.handlers={foobox_image_onload:function(e){"image"==e.fb.item.type&&i.raise("foobox_image_onload",{thumb:{jq:e.fb.item.element,target:e.fb.item.url}})},foobox_image_custom_caption:function(e){var t=i.raise("foobox_image_custom_caption",{thumb:e.fb.item.element,title:e.fb.item.title,desc:e.fb.item.description,handled:!1});if(1==t.handled){e.fb.item.title=t.title,e.fb.item.description=t.desc;var n="string"==typeof e.fb.item.title&&e.fb.item.title.length>0?o.format('<div class="fbx-caption-title">{0}</div>',e.fb.item.title):"";n="string"==typeof e.fb.item.description&&e.fb.item.description.length>0?n+o.format('<div class="fbx-caption-desc">{0}</div>',e.fb.item.description):n,e.fb.item.caption=n}}}},o.addons.register(o.Events)}(jQuery,window.FooBox),function(e,o){var t={fullscreen:{enabled:!1,force:!1,useAPI:!0},strings:{fullscreen:"Fullscreen",minimize:"Minimize"}};o.Fullscreen=function(o){this.FooBox=o;var t=this,i=!1;this.preinit=function(e){e.unbind({"foobox.initialized foobox.reinitialized":t.handlers.initialized,"foobox.setupHtml":t.handlers.setupHtml,"foobox.setupOptions":t.handlers.setupOptions,"foobox.close":t.handlers.onClose,"foobox.keydown":t.handlers.onKeydown}).bind({"foobox.initialized foobox.reinitialized":t.handlers.initialized,"foobox.setupHtml":t.handlers.setupHtml,"foobox.setupOptions":t.handlers.setupOptions,"foobox.close":t.handlers.onClose,"foobox.keydown":t.handlers.onKeydown})},this.handlers={initialized:function(o){o.fb.instance.element.unbind({"foobox.afterShow":t.handlers.afterShow,"foobox.beforeLoad":t.handlers.beforeLoad}),o.fb.modal.find(".fbx-fullscreen-toggle").unbind("click.foobox",t.handlers.onClick),e(document).unbind("webkitfullscreenchange mozfullscreenchange fullscreenchange",t.handlers.onFullscreenChange).bind("webkitfullscreenchange mozfullscreenchange fullscreenchange",t.handlers.onFullscreenChange),o.fb.options.fullscreen.enabled===!0&&(o.fb.instance.element.bind({"foobox.beforeLoad":t.handlers.beforeLoad}),o.fb.modal.find(".fbx-fullscreen-toggle").bind("click.foobox",t.handlers.onClick)),o.fb.instance.element.bind({"foobox.afterShow":t.handlers.afterShow})},setupHtml:function(e){e.fb.modal.find(".fbx-inner").append('<a href="#fullscreen" title="'+t.FooBox.options.strings.fullscreen+'" class="fbx-fullscreen-toggle fbx-btn-transition"></a>')},setupOptions:function(e){1==e.fb.options.fullscreen.enabled?e.fb.modal.addClass("fbx-fullscreen"):e.fb.modal.removeClass("fbx-fullscreen"),1==e.fb.options.fullscreen.force&&e.fb.modal.find(".fbx-fullscreen-toggle").hide()},afterShow:function(e){e.fb.options.fullscreen.force===!0&&(t.FooBox.modal.element.addClass("fbx-fullscreen"),t.fullscreen.launch())},beforeLoad:function(e){if(e.fb.modal.hasClass("fbx-fullscreen-mode")&&1!=e.fb.item.fullscreen)switch(e.fb.handled=!0,e.fb.instance.items.indexes.direction){case"<":e.fb.instance.modal.prev();break;default:e.fb.instance.modal.next()}else 1!=e.fb.item.fullscreen?e.fb.modal.removeClass("fbx-fullscreen").find(".fbx-fullscreen-toggle").hide():e.fb.modal.addClass("fbx-fullscreen").find(".fbx-fullscreen-toggle").show()},onClick:function(e){return e.preventDefault(),t.FooBox.modal.element.hasClass("fbx-fullscreen-mode")?t.fullscreen.cancel():t.fullscreen.launch(),!1},onClose:function(){t.fullscreen.cancel()},onKeydown:function(e){e.fb.modal.hasClass("fbx-fullscreen-mode")&&27==e.fb.keyCode&&(t.fullscreen.cancel(),1==e.fb.options.fullscreen.force&&e.fb.instance.modal.close())},onFullscreenChange:function(){document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen?t.fullscreen.apply():t.fullscreen.remove()}},this.fullscreen={launch:function(){if(t.FooBox.options.fullscreen.useAPI===!0&&t.FooBox.options.fullscreen.force===!1){var e=t.FooBox.modal.element.get(0);e.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():t.fullscreen.apply()}else t.fullscreen.apply()},cancel:function(){t.FooBox.modal.element.hasClass("fbx-fullscreen-mode")&&(t.FooBox.options.fullscreen.useAPI===!0&&t.FooBox.options.fullscreen.force===!1?document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():t.fullscreen.remove():t.fullscreen.remove())},apply:function(){var e=t.FooBox.items.current();e&&(i=t.FooBox.options.closeOnOverlayClick,t.FooBox.options.closeOnOverlayClick=!1,t.FooBox.modal.element.addClass("fbx-fullscreen-mode").find(".fbx-fullscreen-toggle").attr("title",t.FooBox.options.strings.minimize),t.FooBox.modal.resize(e.handler.getSize(e))),t.FooBox.raise("foobox.fullscreenEnabled")},remove:function(){var e=t.FooBox.items.current();e&&(t.FooBox.options.closeOnOverlayClick=i,t.FooBox.modal.element.removeClass("fbx-fullscreen-mode").find(".fbx-fullscreen-toggle").attr("title",t.FooBox.options.strings.fullscreen),t.FooBox.modal.resize(e.handler.getSize(e))),t.FooBox.raise("foobox.fullscreenDisabled")}}},o.addons.register(o.Fullscreen,t)}(jQuery,window.FooBox),function(e,o){o.Keyboard=function(o){this.FooBox=o;var t=this;this.preinit=function(e){e.unbind("foobox.initialized foobox.reinitialized",t.handlers.initialized).bind("foobox.initialized foobox.reinitialized",t.handlers.initialized)},this.handlers={initialized:function(){e(document).unbind("keydown.foobox",t.handlers.onKeydown).bind("keydown.foobox",t.handlers.onKeydown)},onKeydown:function(e){var o=t.FooBox.modal;if(!o.element.is(":visible"))return!0;var i=e.which;return o.element.hasClass("fbx-fullscreen-mode")||27!==i?t.FooBox.items.multiple()&&37===i?o.prev():t.FooBox.items.multiple()&&39===i&&o.next():o.close(),t.FooBox.raise("foobox.keydown",{keyCode:i}),!0}}},o.addons.register(o.Keyboard)}(jQuery,window.FooBox),function(e,o){var t={hideNavOnMobile:!1,resizeTimeout:300,breakpoints:{phone:480,tablet:1024}};o.BPInfo=function(o){this.width=window.innerWidth||(document.body?document.body.offsetWidth:0),this.height=window.innerHeight||(document.body?document.body.offsetHeight:0),this.orientation=this.width>this.height?"fbx-landscape":"fbx-portrait";var t,i=null;if(e.isArray(o))for(var n=0;o.length>n;n++)if(t=o[n],t&&t.width&&this.width<=t.width){i=t;break}this.breakpoint=null==i?"fbx-desktop":i.name},o.Responsive=function(t){this.FooBox=t,this.breakpoint={values:[],names:""},this.timers={resize:new o.Timer};var i=this;this.preinit=function(e){e.unbind("foobox.initialized foobox.reinitialized",i.handlers.initialized).bind("foobox.initialized foobox.reinitialized",i.handlers.initialized)},this.handlers={initialized:function(){i.setup.breakpoints(),i.style(),e(window).unbind("resize.foobox",i.handlers.resize).bind("resize.foobox",i.handlers.resize)},resize:function(){i.timers.resize.start(function(){if(i.style(),i.FooBox.modal.element.is(":visible")){var e=i.FooBox.items.current(),o=e.handler.getSize(e);i.FooBox.modal.resize(o)}},i.FooBox.options.resizeTimeout)}},this.setup={breakpoints:function(){i.breakpoint.values=[],i.breakpoint.names="";for(var e in i.FooBox.options.breakpoints)i.breakpoint.values.push({name:i.fixName(e),width:i.FooBox.options.breakpoints[e]}),i.breakpoint.names+=i.fixName(e)+" ";i.breakpoint.values.sort(function(e,o){return e.width-o.width})}},this.fixName=function(e){return/^fbx-[a-zA-Z0-9]/.test(e)?e:"fbx-"+e},this.style=function(){var e=new o.BPInfo(i.breakpoint.values),t=i.FooBox.modal.element;t.removeClass(i.breakpoint.names).removeClass("fbx-desktop fbx-landscape fbx-portrait").addClass(e.breakpoint).addClass(e.orientation),i.FooBox.options.hideNavOnMobile===!0?t.addClass("fbx-no-nav"):t.removeClass("fbx-no-nav")}},o.addons.register(o.Responsive,t)}(jQuery,window.FooBox),function(e,o){var t={slideshow:{autostart:!1,enabled:!0,imagesOnly:!1,mousestopTimeout:300,timeout:6e3,sensitivity:130,skipErrors:!1},strings:{play:"Play",pause:"Pause"}};o.Slideshow=function(e){this.FooBox=e,this.autostart=!1,this.running=!1,this.paused=0,this.remaining=0,this.timers={mousestop:new o.Timer};var t=this,i=null;this.preinit=function(e,o){t.autostart=o.slideshow.autostart,e.unbind({"foobox.initialized foobox.reinitialized":t.handlers.initialized,"foobox.setupHtml":t.handlers.setupHtml,"foobox.setupOptions":t.handlers.setupOptions,"foobox.onError":t.handlers.onError}).bind({"foobox.initialized foobox.reinitialized":t.handlers.initialized,"foobox.setupHtml":t.handlers.setupHtml,"foobox.setupOptions":t.handlers.setupOptions,"foobox.onError":t.handlers.onError})},this.handlers={initialized:function(e){e.fb.instance.element.unbind({"foobox.beforeLoad":t.handlers.beforeLoad,"foobox.afterLoad":t.handlers.afterLoad,"foobox.close":t.handlers.onClose,"foobox.previous foobox.next":t.handlers.onChange,"foobox.keydown":t.handlers.onKeydown,"foobox.fullscreenEnabled":t.handlers.fullscreenEnabled,"foobox.fullscreenDisabled":t.handlers.fullscreenDisabled}),e.fb.modal.undelegate("click.slideshow").unbind("mousemove.foobox").find(".fbx-play, .fbx-pause").unbind("mouseenter.foobox mouseleave.foobox"),e.fb.options.slideshow.enabled===!0&&e.fb.instance.items.multiple()&&(e.fb.instance.element.bind({"foobox.beforeLoad":t.handlers.beforeLoad,"foobox.afterLoad":t.handlers.afterLoad,"foobox.close":t.handlers.onClose,"foobox.previous foobox.next":t.handlers.onChange,"foobox.keydown":t.handlers.onKeydown,"foobox.fullscreenEnabled":t.handlers.fullscreenEnabled,"foobox.fullscreenDisabled":t.handlers.fullscreenDisabled}),e.fb.modal.delegate(".fbx-play","click.slideshow",t.handlers.playClicked).delegate(".fbx-pause","click.slideshow",t.handlers.pauseClicked),e.fb.modal.hasClass("fbx-playpause-center")&&e.fb.modal.bind("mousemove.foobox",t.handlers.mousemove).find(".fbx-play, .fbx-pause").bind("mouseenter.foobox",t.handlers.mouseenter).bind("mouseleave.foobox",t.handlers.mouseleave))},setupHtml:function(e){e.fb.options.slideshow.enabled===!0&&e.fb.modal.find(".fbx-inner").append('<div class="fbx-progress"></div>').append('<a href="#playpause" class="fbx-play fbx-btn-transition"></a>')},setupOptions:function(e){if(e.fb.options.slideshow.enabled===!0){var o=1==e.fb.options.showButtons&&e.fb.instance.items.multiple()?"":"none";e.fb.modal.addClass("fbx-slideshow").find(".fbx-progress, .fbx-play, .fbx-pause").css("display",o),e.fb.modal.find(".fbx-play").attr("title",e.fb.options.strings.play),e.fb.modal.find(".fbx-pause").attr("title",e.fb.options.strings.pause)}},beforeLoad:function(e){var o=1==e.fb.options.showButtons&&e.fb.instance.items.multiple()?"":"none";e.fb.modal.hasClass("fbx-fullscreen-mode")||e.fb.modal.find(".fbx-play, .fbx-pause").css("display",o),i=null,t.timers.mousestop.stop()},afterLoad:function(){1==t.autostart&&t.start()},onError:function(e){if(e.fb.options.slideshow.skipErrors===!0&&e.fb.instance.modal._first===!1)switch(e.fb.handled=!0,e.fb.instance.items.indexes.direction){case"<":e.fb.instance.modal.prev(e.fb.options.slideshow.imagesOnly===!0?"image":null);break;default:e.fb.instance.modal.next(e.fb.options.slideshow.imagesOnly===!0?"image":null)}else 1==t.autostart&&t.start()},onClose:function(){t.stop(!1)},onChange:function(){t.stop(1==t.autostart||1==t.running)},onKeydown:function(e){return 32!=e.fb.keyCode?!0:(e.preventDefault(),1==t.running?t.pause():t.start(),!1)},fullscreenEnabled:function(e){e.fb.modal.hasClass("fbx-fullscreen-mode")&&e.fb.modal.hasClass("fbx-playpause-center")&&t.timers.mousestop.start(function(){i=null,e.fb.modal.find(".fbx-play, .fbx-pause").fadeOut("fast")},t.FooBox.options.slideshow.mousestopTimeout)},fullscreenDisabled:function(e){var o=1==e.fb.options.showButtons&&e.fb.instance.items.multiple()?"":"none";!e.fb.modal.hasClass("fbx-fullscreen-mode")&&e.fb.modal.hasClass("fbx-playpause-center")&&(e.fb.modal.find(".fbx-play, .fbx-pause").removeClass("fbx-active").css("display",o),i=null,t.timers.mousestop.stop())},playClicked:function(e){return e.preventDefault(),t.start(),!1},pauseClicked:function(e){return e.preventDefault(),t.pause(),!1},mousemove:function(e){var o=t.FooBox.options.slideshow.sensitivity,n=t.FooBox.modal.element;if(n.hasClass("fbx-fullscreen-mode")&&!n.hasClass("fbx-loading")&&!n.hasClass("fbx-error")&&!n.hasClass("fbx-playpause-active")&&n.hasClass("fbx-playpause-center"))if(null==i)i={},i.X=e.pageX,i.Y=e.pageY;else if(i.X-e.pageX>=o||i.Y-e.pageY>=o||-o>=i.X-e.pageX||-o>=i.Y-e.pageY){var s=n.find(".fbx-play, .fbx-pause");s.is(":visible")||s.fadeIn("fast"),t.timers.mousestop.start(function(){i=null,s.fadeOut("fast")},t.FooBox.options.slideshow.mousestopTimeout)}},mouseenter:function(){var e=t.FooBox.modal.element;e.hasClass("fbx-fullscreen-mode")&&!e.hasClass("fbx-error")&&e.hasClass("fbx-playpause-center")&&(e.addClass("fbx-playpause-active"),i=null,t.timers.mousestop.stop())},mouseleave:function(){var e=t.FooBox.modal.element;e.hasClass("fbx-fullscreen-mode")&&!e.hasClass("fbx-error")&&e.hasClass("fbx-playpause-center")&&(e.removeClass("fbx-playpause-active"),t.timers.mousestop.start(function(){i=null,e.find(".fbx-play, .fbx-pause").fadeOut("fast")},t.FooBox.options.slideshow.mousestopTimeout))}},this.start=function(){t.remaining=1>t.remaining?t.FooBox.options.slideshow.timeout:t.remaining,t.autostart=!1,t.running=!0,t.FooBox.modal.element.find(".fbx-progress").css("width",t.paused+"%").show().animate({width:"100%"},t.remaining,"linear",function(){t.paused=0,t.remaining=t.FooBox.options.slideshow.timeout,t.autostart=!0,t.FooBox.modal.next(t.FooBox.options.slideshow.imagesOnly===!0?"image":null)}),t.FooBox.modal.element.find(".fbx-play").attr("title",t.FooBox.options.strings.pause).toggleClass("fbx-play fbx-pause"),t.FooBox.raise("foobox.slideshowStart")},this.stop=function(e){t.paused=0,t.FooBox.modal.element.find(".fbx-progress").stop().hide().css("width","0%"),t.running=!1,t.autostart=e,t.remaining=t.FooBox.options.slideshow.timeout,e||t.FooBox.modal.element.find(".fbx-pause").attr("title",t.FooBox.options.strings.play).toggleClass("fbx-play fbx-pause"),t.FooBox.raise("foobox.slideshowStop")},this.pause=function(){var e=t.FooBox.modal.element.find(".fbx-progress"),o=e.stop().css("width"),i=e.css("position"),n="fixed"==i?t.FooBox.modal.element.css("width"):t.FooBox.modal.element.find(".fbx-inner").css("width");t.running=!1,t.paused=100*(parseInt(o,0)/parseInt(n,0)),t.remaining=t.FooBox.options.slideshow.timeout-t.FooBox.options.slideshow.timeout*(t.paused/100),t.FooBox.modal.element.find(".fbx-pause").attr("title",t.FooBox.options.strings.play).toggleClass("fbx-play fbx-pause"),t.FooBox.raise("foobox.slideshowPause")}},o.addons.register(o.Slideshow,t)}(jQuery,window.FooBox),function(e,o){var t={social:{animation:"fade",enabled:!1,position:"fbx-top",onlyShowOnHover:!1,hoverDelay:300,links:[{css:"fbx-facebook",supports:["image","video"],title:"Facebook",url:"http://www.facebook.com/sharer.php?s=100&p[url]={url}&p[images][0]={img}&p[title]={title}&p[summary]={desc}"},{css:"fbx-google-plus",supports:["image","video"],title:"Google+",url:"https://plus.google.com/share?url={url-ne}"},{css:"fbx-twitter",supports:["image","video"],title:"Twitter",url:"https://twitter.com/share?url={url}&text={title}",titleSource:"pageTitle",titleCustom:"Custom Tweet Text!"},{css:"fbx-pinterest",supports:["image"],title:"Pinterest",url:"https://pinterest.com/pin/create/bookmarklet/?media={img}&url={url}&title={title}&is_video=false&description={desc}"},{css:"fbx-linkedin",supports:["image","video"],title:"LinkedIn",url:"http://www.linkedin.com/shareArticle?url={url}&title={title}"},{css:"fbx-buffer",supports:["image","video"],title:"Buffer",url:"#"},{css:"fbx-download",supports:["image"],title:"Download",url:"#"},{css:"fbx-email",supports:["image","video"],title:"Email",url:"mailto:"}]}};o.Social=function(t){this.FooBox=t,this.timers={hover:new o.Timer};var i=this;this.preinit=function(e){e.unbind({"foobox.initialized foobox.reinitialized":i.handlers.initialized,"foobox.setupHtml":i.handlers.setupHtml,"foobox.setupOptions":i.handlers.setupOptions,"foobox.onError":i.handlers.onError}).bind({"foobox.initialized foobox.reinitialized":i.handlers.initialized,"foobox.setupHtml":i.handlers.setupHtml,"foobox.setupOptions":i.handlers.setupOptions,"foobox.onError":i.handlers.onError})},this.handlers={initialized:function(e){e.fb.instance.element.unbind({"foobox.beforeLoad":i.handlers.beforeLoad,"foobox.afterLoad":i.handlers.afterLoad}),e.fb.modal.undelegate("mouseenter.social mouseleave.social").find(".fbx-item-current, .fbx-item-next").unbind("click.social"),e.fb.options.social.enabled===!0&&(e.fb.instance.element.bind({"foobox.beforeLoad":i.handlers.beforeLoad,"foobox.afterLoad":i.handlers.afterLoad}),e.fb.modal.find(".fbx-item-current, .fbx-item-next").bind("click.social",i.handlers.toggleSocial),e.fb.options.social.onlyShowOnHover===!0&&(e.fb.instance.element.unbind({"foobox.beforeLoad":i.handlers.beforeLoad,"foobox.afterLoad":i.handlers.afterLoad}),e.fb.modal.delegate(".fbx-inner:not(:has(.fbx-item-error))","mouseenter.social",i.handlers.mouseenter).delegate(".fbx-inner:not(:has(.fbx-item-error))","mouseleave.social",i.handlers.mouseleave)))},toggleSocial:function(){0==e(this).has(".fbx-item-error").length&&(i.FooBox.modal.element.find(".fbx-social").is(":visible")?(i.FooBox.modal.element.addClass("fbx-social-hidden"),i.hide()):(i.FooBox.modal.element.removeClass("fbx-social-hidden"),i.show()))},mouseenter:function(e){return e.preventDefault(),i.timers.hover.start(function(){i.show()},i.FooBox.options.social.hoverDelay),!1},mouseleave:function(e){return e.preventDefault(),i.timers.hover.start(function(){i.hide()},i.FooBox.options.social.hoverDelay),!1},setupHtml:function(o){for(var t=e('<div class="fbx-social"></div>'),i=0;o.fb.options.social.links.length>i;i++){var n=o.fb.options.social.links[i];t.append('<a href="'+n.url+'" rel="nofollow" target="_blank" class="'+n.css+'" title="'+n.title+'"></a>')}o.fb.modal.find(".fbx-inner").append(t)},setupOptions:function(e){e.fb.modal.find(".fbx-social").addClass(e.fb.options.social.position).css("display","none")},beforeLoad:function(e){1!=e.fb.options.social.onlyShowOnHover&&i.FooBox.modal.element.find(".fbx-social").hide()},afterLoad:function(o){if(0==o.fb.modal.find(".fbx-item-error").length&&!e(o.fb.item.element).hasClass("no-social"))for(var t=0;o.fb.options.social.links.length>t;t++){var n=o.fb.options.social.links[t],s=o.fb.modal.find("."+n.css);if(s.length>0){-1!==e.inArray(o.fb.item.type,n.supports)?s.show():s.hide();var a=n.url;if(-1!=a.indexOf("{url-ne}")&&(a=a.replace(/{url-ne}/g,location.href)),-1!=a.indexOf("{url}")&&(a=a.replace(/{url}/g,encodeURIComponent(location.href))),-1!=a.indexOf("{img-ne}")&&(a=a.replace(/{img-ne}/g,o.fb.item.url)),-1!=a.indexOf("{img}")){var r=decodeURIComponent(o.fb.item.url);a=a.replace(/{img}/g,encodeURIComponent(r))}if(-1!=a.indexOf("{title}")){var l=o.fb.item.title||"";l="caption"==n.titleSource?o.fb.item.title+(o.fb.item.description?" - "+o.fb.item.description:""):"h1"==n.titleSource?e("h1:first").text():"custom"==n.titleSource?n.titleCustom:document.title+(o.fb.item.title?" - "+o.fb.item.title:""),l=l.replace(/(<([^>]+)>)/gi,""),a=a.replace(/{title}/g,encodeURIComponent(l))}if(-1!=a.indexOf("{desc}")){var d=o.fb.item.description||"";d=d.replace(/(<([^>]+)>)/gi,""),a=a.replace(/{desc}/g,encodeURIComponent(d))}s.attr("href",a)}}1!=o.fb.options.social.onlyShowOnHover&&i.show()},onError:function(e){e.fb.modal.find(".fbx-social").css("display","none")}},this.hide=function(){var e=i.FooBox.items.current(),o=i.FooBox.modal.element.find(".fbx-social");if(!i.FooBox.options.social.enabled||!e.social)return o.css("display","none"),void 0;switch(i.FooBox.options.social.animation){case"fade":o.stop(!0,!0).fadeOut(600);break;case"slide":o.stop(!0,!0).slideUp(400);break;default:o.css("display","none")}},this.show=function(){var e=i.FooBox.items.current(),o=i.FooBox.modal.element.find(".fbx-social");if(!i.FooBox.options.social.enabled||!e.social||i.FooBox.modal.element.hasClass("fbx-social-hidden"))return o.css("display","none"),void 0;switch(i.FooBox.options.social.animation){case"fade":o.stop(!0,!0).fadeIn(600);break;case"slide":o.stop(!0,!0).slideDown(400);break;default:o.css("display","")}}},o.addons.register(o.Social,t)}(jQuery,window.FooBox),function(e,o){var t={swipe:{enabled:!0,min:80}};o.Swipe=function(e){this.FooBox=e,this.isMoving=!1;var o,t=this;this.preinit=function(e){e.unbind("foobox.initialized foobox.reinitialized",t.handlers.initialized).bind("foobox.initialized foobox.reinitialized",t.handlers.initialized)},this.handlers={initialized:function(e){var o=e.fb.modal.find(".fbx-inner").unbind({touchstart:t.handlers.onTouchStart,touchmove:t.handlers.onTouchMove});e.fb.options.swipe.enabled===!0&&o.bind("touchstart",t.handlers.onTouchStart)},onTouchStart:function(e){var i=e.originalEvent.touches||e.touches;1==i.length&&(o=i[0].pageX,t.isMoving=!0,t.FooBox.modal.element.find(".fbx-inner").bind("touchmove",t.handlers.onTouchMove))},onTouchMove:function(e){if(e.preventDefault(),!t.isMoving)return!1;var i=e.originalEvent.touches||e.touches,n=i[0].pageX,s=o-n;return Math.abs(s)>=t.FooBox.options.swipe.min&&(t.cancelTouch(),s>0?(t.FooBox.raise("foobox.swipeRight"),t.FooBox.modal.prev()):(t.FooBox.raise("foobox.swipeLeft"),t.FooBox.modal.next())),!1}},this.cancelTouch=function(){t.FooBox.modal.element.find(".fbx-inner").unbind("touchmove",t.handlers.onTouchMove),o=null,t.isMoving=!1}},o.addons.register(o.Swipe,t)}(jQuery,window.FooBox),function(e,o){var t={wordpress:{enabled:!1}};o.Wordpress=function(e){this.FooBox=e;var t=this;this.preinit=function(e){e.unbind("foobox.initialized foobox.reinitialized",t.handlers.initialized).bind("foobox.initialized foobox.reinitialized",t.handlers.initialized)},this.handlers={initialized:function(e){e.fb.instance.element.unbind("foobox.createCaption",t.handlers.onCreateCaption),e.fb.options.wordpress.enabled===!0&&e.fb.instance.element.bind("foobox.createCaption",t.handlers.onCreateCaption)},onCreateCaption:function(e){var t=e.fb.options;1==t.wordpress.enabled&&(e.fb.element.hasClass("gallery")?(t.captions.overrideTitle===!1&&(e.fb.item.title=e.fb.element.attr("title")),t.captions.overrideDesc===!1&&(e.fb.item.description=e.fb.element.closest(".gallery-item").find(".wp-caption-text:first").html()||"")):e.fb.element.hasClass("wp-caption")?(t.captions.overrideTitle===!1&&(e.fb.item.title=e.fb.element.find("img").attr("title")),t.captions.overrideDesc===!1&&(e.fb.item.description=e.fb.element.find(".wp-caption-text:first").html()||"")):e.fb.element.hasClass("tiled-gallery")&&(t.captions.overrideTitle===!1&&(e.fb.item.title=e.fb.element.parents(".tiled-gallery-item:first").find(".tiled-gallery-caption").html()||e.fb.element.find("img").data("image-title")||e.fb.element.find("img").attr("title")||""),t.captions.overrideDesc===!1&&(e.fb.item.description=e.fb.element.find("img").data("image-description")||"")),e.fb.item.caption="string"==typeof e.fb.item.title&&e.fb.item.title.length>0?o.format('<div class="fbx-caption-title">{0}</div>',e.fb.item.title):"",e.fb.item.caption="string"==typeof e.fb.item.description&&e.fb.item.description.length>0?e.fb.item.caption+o.format('<div class="fbx-caption-desc">{0}</div>',e.fb.item.description):e.fb.item.caption)}}},o.addons.register(o.Wordpress,t)}(jQuery,window.FooBox),function(e,o){var t={html:{attr:"href",overflow:!0,findSelector:function(e,o){if(!o)return"";var t=o.attr(e.options.html.attr);return"string"==typeof t?o.attr(e.options.html.attr):""}}};o.HtmlHandler=function(t){this.FooBox=t,this.type="html",this.regex=/^#/i;var i=this;this.init=function(e){e.unbind("foobox.close",i.handlers.onClose).bind("foobox.close",i.handlers.onClose)},this.handlers={onClose:function(){var o,t;for(o=0;i.FooBox.items.array.length>o;o++)t=i.FooBox.items.array[o],t.type==i.type&&t.content instanceof jQuery&&0==t.error&&e(t.selector).length>0&&(e(t.selector).append(t.content.children()),t.content=null)}},this.handles=function(o){var t=i.FooBox.options.html.findSelector(i.FooBox,o),n="foobox"===e(o).attr("target")&&"string"==typeof t&&null!=t.match(i.regex)&&(e(t).length>0||1==e(o).data("ajax")),s=i.FooBox.raise("foobox.handlesHtml",{element:o,handle:n});return s.fb.handle},this.defaults=function(e){e.fullscreen=e.fullscreen||!1,e.overflow=e.overflow||i.FooBox.options.html.overflow},this.parse=function(t){var n=new o.Item(i.type,t,this);i.defaults(n),n.url=n.selector=i.FooBox.options.html.findSelector(i.FooBox,t)||null,i.getSize(n);var s=null!=n.selector?e(n.selector):null;return null!=s&&s.length>0?(n.width=s.data("width")||t.data("width")||n.width||null,n.height=s.data("height")||t.data("height")||n.height||null,n.title=s.data("title")||t.data("title")||n.title||null,n.description=s.data("description")||t.data("description")||n.description||null):(n.width=t.data("width")||n.width||null,n.height=t.data("height")||n.height||null,n.title=t.data("title")||n.title||null,n.description=t.data("description")||n.description||null),n.deeplink=n.selector.replace("#",""),n.overflow=t.data("overflow")||n.overflow,n},this.load=function(o,t,n,s){try{var a=e("<div/>").addClass("fbx-item");if(1==o.error?a.addClass("fbx-item-error"):a.addClass("fbx-item-html"),null==o.content&&"string"==typeof o.selector){if(0==e(o.selector).length){var r=i.FooBox.raise("foobox.loadHtml",{container:a,selector:o.selector,success:function(){o.content=r.fb.container,t.empty().append(o.content),e.isFunction(n)&&n(i.getSize(o))},error:function(o){o=o||"Unable to load HTML.",e.isFunction(s)&&s(o)}});return}var l=e(o.selector);l.length>0&&(o.content=a.append(l.children()))}o.content instanceof jQuery?(t.empty().append(o.content),e.isFunction(n)&&n(i.getSize(o))):e.isFunction(s)&&s("No valid HTML found to display.")}catch(d){e.isFunction(s)&&s(d)}},this.preload=function(){},this.getSize=function(t){if((null==t.width||null==t.height||0==t.width||0==t.height)&&"string"==typeof t.selector){var i;"string"==typeof t.selector&&e(t.selector).length>0?i=e(t.selector).clone():t.content instanceof jQuery&&(i=t.content.clone()),i instanceof jQuery&&(i.css({position:"absolute",visibility:"hidden",display:"block",top:-1e4,left:-1e4}).appendTo("body"),"number"==typeof t.width&&t.width>0?i.width(t.width):t.width=i.outerWidth(!0),t.height="number"==typeof t.height&&t.height>0?t.height:i.outerHeight(!0),i.remove())}return null!=t.width&&null!=t.height?new o.Size(t.width,t.height):new o.Size(0,0)},this.hasChanged=function(){return!1}},o.handlers.register(o.HtmlHandler,t)}(jQuery,window.FooBox),function(e,o){var t={iframe:{attr:"href",findUrl:function(e,o){if(!o)return"";var t=o.attr(e.options.iframe.attr);return"string"==typeof t?o.attr(e.options.iframe.attr):""}}};o.IframeHandler=function(t){this.FooBox=t,this.type="iframe",this.regex=/^https?/i;var i=this;this.handles=function(o){var t=i.FooBox.options.iframe.findUrl(i.FooBox,o),n="foobox"===e(o).attr("target")&&"string"==typeof t&&null!=t.match(i.regex),s=i.FooBox.raise("foobox.handlesIframe",{element:o,handle:n});return s.fb.handle},this.defaults=function(e){e.fullscreen=e.fullscreen||!0},this.parse=function(e){var t=new o.Item(i.type,e,this);return i.defaults(t),t.url=i.FooBox.options.iframe.findUrl(i.FooBox,e)||null,t.width=e.data("width")||t.width||null,t.height=e.data("height")||t.height||null,t.title=e.data("title")||t.title||null,t.description=e.data("description")||t.description||null,t},this.load=function(o,t,n,s){try{var a=e("<iframe />").addClass("fbx-item fbx-item-iframe").attr("src",o.url);t.empty().append(a),e.isFunction(n)&&n(i.getSize(o))}catch(r){e.isFunction(s)&&s(r)}},this.preload=function(){},this.getSize=function(e){return(null==e.width||null==e.height)&&(e.width=(window.innerWidth||(document.body?document.body.offsetWidth:0))/.8,e.height=(window.innerHeight||(document.body?document.body.offsetHeight:0))/.8),null!=e.width&&null!=e.height?new o.Size(e.width,e.height):new o.Size(0,0)},this.hasChanged=function(){return!1}},o.handlers.register(o.IframeHandler,t)}(jQuery,window.FooBox),function(e,o){var t={images:{noRightClick:!1,attr:"href",overflow:!1,findUrl:function(e,o){if(!o)return"";var t=o.attr(e.options.images.attr);return"string"==typeof t?o.attr(e.options.images.attr):""}}};o.ImageHandler=function(t){this.FooBox=t,this.type="image",this.regex=/\.(jpg|jpeg|png|gif|bmp)/i;var i=this;this.handles=function(e){var o=i.FooBox.options.images.findUrl(i.FooBox,e),t="string"==typeof o&&null!=o.match(i.regex),n=i.FooBox.raise("foobox.handlesImage",{element:e,handle:t});return n.fb.handle},this.defaults=function(e){e.fullscreen=e.fullscreen||!0,e.captions=e.captions||!0,e.social=e.social||!0,e.overflow=e.overflow||i.FooBox.options.images.overflow},this.parse=function(e){var t=new o.Item(i.type,e,this);return i.defaults(t),t.url=i.FooBox.options.images.findUrl(i.FooBox,e)||null,t.width=e.data("width")||t.width||null,t.height=e.data("height")||t.height||null,t.title=e.data("title")||t.title||null,t.description=e.data("description")||t.description||null,t.overflow=e.data("overflow")||t.overflow||!1,t.image=null,t.url.match(/.*\/(.*)$/)&&(t.deeplink=t.url.match(/.*\/(.*)$/)[1]),t},this.load=function(o,t,n,s){var a=function(){var s=e(o.image).addClass("fbx-item fbx-item-image");i.FooBox.options.images.noRightClick&&s.bind("contextmenu",function(e){return e.preventDefault(),!1}),t.empty().append(s),e.isFunction(n)&&n(i.getSize(o))};o.image&&null!==o.image?a():(o.image=new Image,o.image.onload=function(){o.image.onload=o.image.onerror=null,o.height=o.image.height,o.width=o.image.width,a()},o.image.onerror=function(){o.image.onload=o.image.onerror=null,o.image=null,e.isFunction(s)&&s("An error occurred attempting to load the image.")},o.image.src=o.url)},this.preload=function(e){if(1!=e.preloaded){var o=new Image;o.src=e.url,e.preloaded=!0}},this.getSize=function(e){return null!=e.width&&null!=e.height?new o.Size(e.width,e.height):new o.Size(0,0)},this.hasChanged=function(e){if(e.element instanceof jQuery){var o=i.FooBox.options.images.findUrl(i.FooBox,e.element);return e.url!=o}return!1}},o.handlers.register(o.ImageHandler,t)}(jQuery,window.FooBox),function(e,o){var t={videos:{attr:"href",findUrl:function(e,o){if(!o)return"";var t=o.attr(e.options.videos.attr);return"string"==typeof t?o.attr(e.options.videos.attr):""},autoPlay:!1,defaultWidth:640,defaultHeight:385,showCaptions:!1}};o.VideoHandler=function(t){this.FooBox=t,this.type="video",this.regex=/(youtube\.com\/watch|youtu\.be|vimeo\.com)/i;var i=this;this.handles=function(e){var o=i.FooBox.options.videos.findUrl(i.FooBox,e),t="string"==typeof o&&null!=o.match(i.regex),n=i.FooBox.raise("foobox.handlesVideo",{element:e,handle:t});return n.fb.handle},this.defaults=function(e){e.width=e.width||i.FooBox.options.videos.defaultWidth,e.height=e.height||i.FooBox.options.videos.defaultHeight,e.fullscreen=e.fullscreen||!0,e.social=e.social||!0,e.captions=e.captions||i.FooBox.options.videos.showCaptions},this.parse=function(e){var t=new o.Item(i.type,e,this);return i.defaults(t),t.url=i.FooBox.options.videos.findUrl(i.FooBox,e)||null,t.width=e.data("width")||t.width||null,t.height=e.data("height")||t.height||null,t.title=e.data("title")||t.title||null,t.description=e.data("description")||t.description||null,t},this.load=function(o,t,n,s){try{var a=o.url;if(a.match("http://(www.)?youtube|youtu.be")?(o.video_id=a.match("embed")?a.split(/embed\//)[1].split('"')[0]:a.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0],o.deeplink=o.video_id,o.video_type="youtube",o.video_url="http://www.youtube.com/embed/"+o.video_id,o.video_url+=i.getUrlVar("rel",a)?"?rel="+i.getUrlVar("rel",a):"?rel=0",i.FooBox.options.videos.autoPlay&&(o.video_url+="&autoplay=1"),o.video_valid=!0):a.match("http://(player.)?vimeo.com")&&(o.video_type="vimeo",o.video_id=a.split(/video\/|http:\/\/vimeo\.com\//)[1].split(/[?&]/)[0],o.deeplink=o.video_id,o.video_url="http://player.vimeo.com/video/"+o.video_id,i.FooBox.options.videos.autoPlay&&(o.video_url+="&autoplay=1"),o.video_valid=!0),o.video_valid===!0){var r=e('<iframe webkitAllowFullScreen mozallowfullscreen allowFullScreen style="width:100%; height:100%" frameborder="no" />').attr("src",o.video_url).addClass("fbx-item fbx-item-video");t.empty().append(r),e.isFunction(n)&&n(i.getSize(o))}else e.isFunction(s)&&s("The video ["+o.url+"] is not supported")}catch(l){e.isFunction(s)&&s(l)}},this.preload=function(){},this.getSize=function(e){return(null==e.width||null==e.height)&&(e.width=i.FooBox.options.videos.defaultWidth,e.height=i.FooBox.options.videos.defaultHeight),null!=e.width&&null!=e.height?new o.Size(e.width,e.height):new o.Size(0,0)},this.hasChanged=function(){return!1},this.getUrlVar=function(e,o){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=RegExp("[\\?&]"+e+"=([^&#]*)"),i=t.exec(o);return null==i?"":decodeURIComponent(i[1].replace(/\+/g," "))}},o.handlers.register(o.VideoHandler,t)}(jQuery,window.FooBox);